{"version":3,"file":"getWebpackEnvOptions.js","names":["_path","_interopRequireDefault","require","_env","e","__esModule","default","getWebpackEnvOptions","cliOptions","env","bundleFilename","context","config","root","reactNativePath","arguments","mode","bundle","dev","platform","minimize","minify","entryFile","entry","path","isAbsolute","startsWith","bundleOutput","sourceMapFilename","sourcemapOutput","assetsPath","assetsDest","devServer","port","start","DEFAULT_PORT","host","DEFAULT_HOSTNAME","https","cert","key","undefined","hmr"],"sources":["../../../src/webpack/utils/getWebpackEnvOptions.ts"],"sourcesContent":["import path from 'path';\nimport type { CliOptions, WebpackEnvOptions } from '../../types';\nimport { DEFAULT_HOSTNAME, DEFAULT_PORT } from '../../env';\n\nexport function getWebpackEnvOptions(\n  cliOptions: CliOptions\n): WebpackEnvOptions {\n  const env: WebpackEnvOptions = { bundleFilename: '' };\n\n  env.context = cliOptions.config.root;\n  env.reactNativePath = cliOptions.config.reactNativePath;\n\n  if ('bundle' in cliOptions.arguments) {\n    env.mode = cliOptions.arguments.bundle.dev ? 'development' : 'production';\n    env.platform = cliOptions.arguments.bundle.platform;\n    env.minimize =\n      cliOptions.arguments.bundle.minify ?? env.mode === 'production';\n\n    const { entryFile } = cliOptions.arguments.bundle;\n    env.entry =\n      path.isAbsolute(entryFile) || entryFile.startsWith('./')\n        ? entryFile\n        : `./${entryFile}`;\n\n    env.bundleFilename = cliOptions.arguments.bundle.bundleOutput;\n    env.sourceMapFilename = cliOptions.arguments.bundle.sourcemapOutput;\n    env.assetsPath = cliOptions.arguments.bundle.assetsDest;\n  } else {\n    env.mode = 'development';\n    env.devServer = {\n      port: cliOptions.arguments.start.port ?? DEFAULT_PORT,\n      host: cliOptions.arguments.start.host || DEFAULT_HOSTNAME,\n      https: cliOptions.arguments.start.https\n        ? {\n            cert: cliOptions.arguments.start.cert,\n            key: cliOptions.arguments.start.key,\n          }\n        : undefined,\n      hmr: true,\n    };\n  }\n\n  return env;\n}\n"],"mappings":";;;;;;AAAA,IAAAA,KAAA,GAAAC,sBAAA,CAAAC,OAAA;AAEA,IAAAC,IAAA,GAAAD,OAAA;AAA2D,SAAAD,uBAAAG,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AAEpD,SAASG,oBAAoBA,CAClCC,UAAsB,EACH;EACnB,MAAMC,GAAsB,GAAG;IAAEC,cAAc,EAAE;EAAG,CAAC;EAErDD,GAAG,CAACE,OAAO,GAAGH,UAAU,CAACI,MAAM,CAACC,IAAI;EACpCJ,GAAG,CAACK,eAAe,GAAGN,UAAU,CAACI,MAAM,CAACE,eAAe;EAEvD,IAAI,QAAQ,IAAIN,UAAU,CAACO,SAAS,EAAE;IACpCN,GAAG,CAACO,IAAI,GAAGR,UAAU,CAACO,SAAS,CAACE,MAAM,CAACC,GAAG,GAAG,aAAa,GAAG,YAAY;IACzET,GAAG,CAACU,QAAQ,GAAGX,UAAU,CAACO,SAAS,CAACE,MAAM,CAACE,QAAQ;IACnDV,GAAG,CAACW,QAAQ,GACVZ,UAAU,CAACO,SAAS,CAACE,MAAM,CAACI,MAAM,IAAIZ,GAAG,CAACO,IAAI,KAAK,YAAY;IAEjE,MAAM;MAAEM;IAAU,CAAC,GAAGd,UAAU,CAACO,SAAS,CAACE,MAAM;IACjDR,GAAG,CAACc,KAAK,GACPC,aAAI,CAACC,UAAU,CAACH,SAAS,CAAC,IAAIA,SAAS,CAACI,UAAU,CAAC,IAAI,CAAC,GACpDJ,SAAS,GACT,KAAKA,SAAS,EAAE;IAEtBb,GAAG,CAACC,cAAc,GAAGF,UAAU,CAACO,SAAS,CAACE,MAAM,CAACU,YAAY;IAC7DlB,GAAG,CAACmB,iBAAiB,GAAGpB,UAAU,CAACO,SAAS,CAACE,MAAM,CAACY,eAAe;IACnEpB,GAAG,CAACqB,UAAU,GAAGtB,UAAU,CAACO,SAAS,CAACE,MAAM,CAACc,UAAU;EACzD,CAAC,MAAM;IACLtB,GAAG,CAACO,IAAI,GAAG,aAAa;IACxBP,GAAG,CAACuB,SAAS,GAAG;MACdC,IAAI,EAAEzB,UAAU,CAACO,SAAS,CAACmB,KAAK,CAACD,IAAI,IAAIE,iBAAY;MACrDC,IAAI,EAAE5B,UAAU,CAACO,SAAS,CAACmB,KAAK,CAACE,IAAI,IAAIC,qBAAgB;MACzDC,KAAK,EAAE9B,UAAU,CAACO,SAAS,CAACmB,KAAK,CAACI,KAAK,GACnC;QACEC,IAAI,EAAE/B,UAAU,CAACO,SAAS,CAACmB,KAAK,CAACK,IAAI;QACrCC,GAAG,EAAEhC,UAAU,CAACO,SAAS,CAACmB,KAAK,CAACM;MAClC,CAAC,GACDC,SAAS;MACbC,GAAG,EAAE;IACP,CAAC;EACH;EAEA,OAAOjC,GAAG;AACZ","ignoreList":[]}