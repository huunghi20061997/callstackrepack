{"version":3,"file":"composeSourceMaps.js","names":["_nodePath","_interopRequireDefault","require","_fsExtra","_execa","e","__esModule","default","composeSourceMaps","reactNativePath","packagerMapPath","compilerMapPath","composedSourceMapPath","execa","node","path","join","fs","unlink","rename","error","message","toString","Error","exports"],"sources":["../../../../../src/webpack/plugins/ChunksToHermesBytecodePlugin/utils/composeSourceMaps.ts"],"sourcesContent":["import path from 'node:path';\nimport fs from 'fs-extra';\nimport execa from 'execa';\n\n/**\n * {@link composeSourceMaps} options.\n */\ninterface ComposeSourceMapsOptions {\n  /** Path to the React Native root directory. */\n  reactNativePath: string;\n\n  /**\n   * Path to the source map generated by webpack-bundle.\n   *\n   * This will be replaced with the composed source map.\n   */\n  packagerMapPath: string;\n\n  /** Path to React-Native package inside node_modules. */\n  compilerMapPath: string;\n}\n\n/**\n * Composes source maps generated by webpack-bundle and Hermes.\n *\n * Removes original source map files.\n */\nexport const composeSourceMaps = async ({\n  reactNativePath,\n  packagerMapPath,\n  compilerMapPath,\n}: ComposeSourceMapsOptions) => {\n  const composedSourceMapPath = packagerMapPath + '.composed';\n\n  try {\n    await execa.node(\n      path.join(reactNativePath, 'scripts', 'compose-source-maps.js'),\n      [packagerMapPath, compilerMapPath, '-o', composedSourceMapPath]\n    );\n\n    // Remove intermediate files\n    await fs.unlink(packagerMapPath);\n    await fs.unlink(compilerMapPath);\n\n    await fs.rename(composedSourceMapPath, packagerMapPath);\n  } catch (error) {\n    const message = (error as Error).toString();\n    throw new Error(\n      `ChunksToHermesBytecodePlugin: Failed to compose source maps. Reason:\\n${message})`\n    );\n  }\n};\n"],"mappings":";;;;;;AAAA,IAAAA,SAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,QAAA,GAAAF,sBAAA,CAAAC,OAAA;AACA,IAAAE,MAAA,GAAAH,sBAAA,CAAAC,OAAA;AAA0B,SAAAD,uBAAAI,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AAE1B;AACA;AACA;;AAgBA;AACA;AACA;AACA;AACA;AACO,MAAMG,iBAAiB,GAAG,MAAAA,CAAO;EACtCC,eAAe;EACfC,eAAe;EACfC;AACwB,CAAC,KAAK;EAC9B,MAAMC,qBAAqB,GAAGF,eAAe,GAAG,WAAW;EAE3D,IAAI;IACF,MAAMG,cAAK,CAACC,IAAI,CACdC,iBAAI,CAACC,IAAI,CAACP,eAAe,EAAE,SAAS,EAAE,wBAAwB,CAAC,EAC/D,CAACC,eAAe,EAAEC,eAAe,EAAE,IAAI,EAAEC,qBAAqB,CAChE,CAAC;;IAED;IACA,MAAMK,gBAAE,CAACC,MAAM,CAACR,eAAe,CAAC;IAChC,MAAMO,gBAAE,CAACC,MAAM,CAACP,eAAe,CAAC;IAEhC,MAAMM,gBAAE,CAACE,MAAM,CAACP,qBAAqB,EAAEF,eAAe,CAAC;EACzD,CAAC,CAAC,OAAOU,KAAK,EAAE;IACd,MAAMC,OAAO,GAAID,KAAK,CAAWE,QAAQ,CAAC,CAAC;IAC3C,MAAM,IAAIC,KAAK,CACb,yEAAyEF,OAAO,GAClF,CAAC;EACH;AACF,CAAC;AAACG,OAAA,CAAAhB,iBAAA,GAAAA,iBAAA","ignoreList":[]}