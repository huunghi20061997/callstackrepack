{"version":3,"file":"init.js","names":["$chunkId$","$chunkLoadingGlobal$","$globalObject$","$hmrEnabled$","module","exports","repackRuntime","loadScript","loadHotUpdate","shared","__repack__","__webpack_require__","repack","loadScriptCallback","scriptManager","undefined","repackLoadScriptCallback","parentPush","data","chunkIds","i","length","push","chunkLoadingGlobal","bind","repackScriptStartup","startupFunctions","x","startupFunction","results","apply","arguments","Object","defineProperty","get","set","fn","name","caller","done","then","catch","reason","console","error","type","target","src","url","fetch","response","ok","statusText","text","script","globalEvalWithSourceUrl","self","eval","call"],"sources":["../../../../../../src/webpack/plugins/RepackTargetPlugin/runtime/implementation/init.ts"],"sourcesContent":["/* eslint-disable no-restricted-globals */\n/* eslint-disable @typescript-eslint/prefer-optional-chain */\n/* eslint-disable promise/prefer-await-to-then */\n/* eslint-disable promise/no-callback-in-promise */\n/* eslint-env browser */\n/* global LoadScriptEvent RepackRuntime __webpack_require__ */\n\nconst $chunkId$ = '';\nconst $chunkLoadingGlobal$ = '';\nconst $globalObject$ = {} as Record<string, any>;\nconst $hmrEnabled$ = false;\n\nmodule.exports = function () {\n  var repackRuntime: RepackRuntime = {\n    loadScript,\n    loadHotUpdate,\n    shared: ($globalObject$.__repack__ && $globalObject$.__repack__.shared) ||\n      (__webpack_require__.repack && __webpack_require__.repack.shared) || {\n        loadScriptCallback: [],\n        scriptManager: undefined,\n      },\n  };\n\n  __webpack_require__.repack = $globalObject$.__repack__ = repackRuntime;\n\n  (function () {\n    function repackLoadScriptCallback(\n      parentPush: (data: string) => void,\n      data: string\n    ) {\n      if (parentPush) {\n        parentPush(data);\n      }\n      var chunkIds = data[0];\n      var i = 0;\n      for (; i < chunkIds.length; i++) {\n        repackRuntime.shared.loadScriptCallback.push([chunkIds[i], $chunkId$]);\n      }\n    }\n\n    var chunkLoadingGlobal = ($globalObject$[$chunkLoadingGlobal$] =\n      $globalObject$[$chunkLoadingGlobal$] || []);\n    chunkLoadingGlobal.push = repackLoadScriptCallback.bind(\n      null,\n      chunkLoadingGlobal.push.bind(chunkLoadingGlobal)\n    );\n  })();\n\n  (function () {\n    function repackScriptStartup() {\n      repackRuntime.shared.loadScriptCallback.push([$chunkId$]);\n    }\n\n    var startupFunctions: Function[] = __webpack_require__.x\n      ? [__webpack_require__.x, repackScriptStartup]\n      : [repackScriptStartup];\n\n    function startupFunction(this: any) {\n      var results;\n      for (var i = 0; i < startupFunctions.length; i++) {\n        results = startupFunctions[i].apply(this, arguments);\n      }\n      return results;\n    }\n\n    Object.defineProperty(__webpack_require__, 'x', {\n      get() {\n        return startupFunction;\n      },\n      set(fn) {\n        startupFunctions.push(fn);\n      },\n    });\n  })();\n\n  function loadScript(\n    name: string,\n    caller: string | undefined,\n    done: (event?: LoadScriptEvent) => void\n  ) {\n    if (repackRuntime.shared.scriptManager) {\n      repackRuntime.shared.scriptManager\n        .loadScript(name, caller, __webpack_require__)\n        .then(function () {\n          done();\n          return;\n        })\n        .catch(function (reason) {\n          console.error('[RepackRuntime] Loading script failed:', reason);\n          done({ type: 'exec', target: { src: name } });\n        });\n    } else {\n      console.error('[RepackRuntime] Script manager was not provided');\n      done({ type: 'exec', target: { src: name } });\n    }\n  }\n\n  function loadHotUpdate(url: string, done: (event?: LoadScriptEvent) => void) {\n    if (!$hmrEnabled$) {\n      console.error('[RepackRuntime] Loading HMR update chunks is disabled');\n      done({ type: 'disabled', target: { src: url } });\n      return;\n    }\n\n    (\n      fetch(url).then(function (response) {\n        if (!response.ok) {\n          console.error(\n            '[RepackRuntime] Loading HMR update failed:',\n            response.statusText\n          );\n          done({ type: response.statusText, target: { src: url } });\n          return;\n        }\n\n        return response.text();\n      }) as Promise<string | undefined>\n    )\n      .then(function (script?: string) {\n        if (script) {\n          // @ts-ignore\n          const globalEvalWithSourceUrl = self.globalEvalWithSourceUrl;\n          (function () {\n            if (globalEvalWithSourceUrl) {\n              globalEvalWithSourceUrl(script, null);\n            } else {\n              eval(script);\n            }\n          }).call(self);\n          done();\n        }\n\n        return;\n      })\n      .catch(function (reason) {\n        console.error(\n          '[RepackRuntime] Loading HMR update chunk failed:',\n          reason\n        );\n        done({ type: 'exec', target: { src: url } });\n      });\n  }\n};\n"],"mappings":"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","ignoreList":[]}