{"version":3,"file":"ManifestPlugin.js","names":["_webpack","_interopRequireDefault","require","e","__esModule","default","ManifestPlugin","apply","compiler","hooks","compilation","tap","afterProcessAssets","chunk","chunks","manifest","id","name","files","sort","auxiliaryFiles","length","manifestFile","add","emitAsset","webpack","sources","RawSource","JSON","stringify","exports"],"sources":["../../../src/webpack/plugins/ManifestPlugin.ts"],"sourcesContent":["import webpack from 'webpack';\nimport type { WebpackPlugin } from '../../types';\n\n/**\n * @category Webpack Plugin\n */\nexport class ManifestPlugin implements WebpackPlugin {\n  /**\n   * Apply the plugin.\n   *\n   * @param compiler Webpack compiler instance.\n   */\n  apply(compiler: webpack.Compiler) {\n    compiler.hooks.compilation.tap('TargetPlugin', (compilation) => {\n      compilation.hooks.afterProcessAssets.tap('TargetPlugin', () => {\n        for (const chunk of compilation.chunks) {\n          const manifest = {\n            id: chunk.id,\n            name: chunk.name,\n            files: [...chunk.files].sort(),\n            auxiliaryFiles: [...chunk.auxiliaryFiles].sort(),\n          };\n\n          if (manifest.files.length) {\n            const manifestFile = `${manifest.files[0]}.json`;\n            chunk.auxiliaryFiles.add(manifestFile);\n            compilation.emitAsset(\n              manifestFile,\n              new webpack.sources.RawSource(JSON.stringify(manifest))\n            );\n          }\n        }\n      });\n    });\n  }\n}\n"],"mappings":";;;;;;AAAA,IAAAA,QAAA,GAAAC,sBAAA,CAAAC,OAAA;AAA8B,SAAAD,uBAAAE,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AAG9B;AACA;AACA;AACO,MAAMG,cAAc,CAA0B;EACnD;AACF;AACA;AACA;AACA;EACEC,KAAKA,CAACC,QAA0B,EAAE;IAChCA,QAAQ,CAACC,KAAK,CAACC,WAAW,CAACC,GAAG,CAAC,cAAc,EAAGD,WAAW,IAAK;MAC9DA,WAAW,CAACD,KAAK,CAACG,kBAAkB,CAACD,GAAG,CAAC,cAAc,EAAE,MAAM;QAC7D,KAAK,MAAME,KAAK,IAAIH,WAAW,CAACI,MAAM,EAAE;UACtC,MAAMC,QAAQ,GAAG;YACfC,EAAE,EAAEH,KAAK,CAACG,EAAE;YACZC,IAAI,EAAEJ,KAAK,CAACI,IAAI;YAChBC,KAAK,EAAE,CAAC,GAAGL,KAAK,CAACK,KAAK,CAAC,CAACC,IAAI,CAAC,CAAC;YAC9BC,cAAc,EAAE,CAAC,GAAGP,KAAK,CAACO,cAAc,CAAC,CAACD,IAAI,CAAC;UACjD,CAAC;UAED,IAAIJ,QAAQ,CAACG,KAAK,CAACG,MAAM,EAAE;YACzB,MAAMC,YAAY,GAAG,GAAGP,QAAQ,CAACG,KAAK,CAAC,CAAC,CAAC,OAAO;YAChDL,KAAK,CAACO,cAAc,CAACG,GAAG,CAACD,YAAY,CAAC;YACtCZ,WAAW,CAACc,SAAS,CACnBF,YAAY,EACZ,IAAIG,gBAAO,CAACC,OAAO,CAACC,SAAS,CAACC,IAAI,CAACC,SAAS,CAACd,QAAQ,CAAC,CACxD,CAAC;UACH;QACF;MACF,CAAC,CAAC;IACJ,CAAC,CAAC;EACJ;AACF;AAACe,OAAA,CAAAxB,cAAA,GAAAA,cAAA","ignoreList":[]}