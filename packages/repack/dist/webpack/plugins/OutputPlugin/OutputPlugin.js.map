{"version":3,"file":"OutputPlugin.js","names":["_nodePath","_interopRequireDefault","require","_nodeAssert","_webpack","_AssetsCopyProcessor","_AuxiliaryAssetsCopyProcessor","_config","e","__esModule","default","OutputPlugin","localSpecs","remoteSpecs","constructor","config","validateConfig","enabled","entryName","extraChunks","include","type","outputPath","path","join","context","platform","forEach","spec","push","matchChunkToSpecs","chunk","specs","chunkIds","names","id","flat","filter","test","exclude","some","webpack","ModuleFilenameHelpers","matchObject","toString","getRelatedSourceMap","auxiliaryFiles","find","file","ensureAbsolutePath","filePath","isAbsolute","classifyChunks","chunks","entryOptions","localChunks","Set","remoteChunks","chunksById","Map","map","initial","entry","add","has","flatMap","siblings","chunkId","get","length","addParentsOfLocalChunks","parents","size","apply","compiler","assert","options","output","logger","getInfrastructureLogger","auxiliaryAssets","hooks","done","tapPromise","stats","compilationStats","toJson","all","assets","chunkRelations","ids","asset","name","localAssetsCopyProcessor","bundleFilename","sourceMapFilename","assetsPath","bundlePath","dirname","debug","AssetsCopyProcessor","bundleOutput","bundleOutputDir","sourcemapOutput","assetsDest","remoteAssetsCopyProcessors","enqueueChunk","isEntry","sourceMapFile","Error","warn","specOutputPath","auxiliaryAssetsCopyProcessor","auxiliaryAssetsPath","AuxiliaryAssetsCopyProcessor","enqueueAsset","Promise","execute","Object","values","reduce","acc","processor","concat","exports"],"sources":["../../../../src/webpack/plugins/OutputPlugin/OutputPlugin.ts"],"sourcesContent":["import path from 'node:path';\nimport assert from 'node:assert';\nimport webpack from 'webpack';\nimport { WebpackPlugin } from '../../../types';\nimport { AssetsCopyProcessor } from '../utils/AssetsCopyProcessor';\nimport { AuxiliaryAssetsCopyProcessor } from '../utils/AuxiliaryAssetsCopyProcessor';\nimport { validateConfig } from './config';\nimport type { DestinationSpec, OutputPluginConfig } from './types';\n\n/**\n * Plugin for copying generated files (bundle, chunks, assets) from Webpack's built location to the\n * React Native application directory, so that the files can be packed together into the `ipa`/`apk`.\n *\n * @category Webpack Plugin\n */\nexport class OutputPlugin implements WebpackPlugin {\n  localSpecs: DestinationSpec[] = [];\n  remoteSpecs: DestinationSpec[] = [];\n\n  constructor(private config: OutputPluginConfig) {\n    validateConfig(config);\n\n    this.config.enabled = this.config.enabled ?? true;\n    this.config.entryName = this.config.entryName ?? 'main';\n    this.config.extraChunks = this.config.extraChunks ?? [\n      {\n        include: /.*/,\n        type: 'remote',\n        outputPath: path.join(\n          this.config.context,\n          'build/outputs',\n          this.config.platform,\n          'remotes'\n        ),\n      },\n    ];\n\n    this.config.extraChunks?.forEach((spec) => {\n      if (spec.type === 'local') this.localSpecs.push(spec);\n      if (spec.type === 'remote') this.remoteSpecs.push(spec);\n    });\n  }\n\n  matchChunkToSpecs(chunk: webpack.StatsChunk, specs: DestinationSpec[]) {\n    const chunkIds = [chunk.names ?? [], chunk.id!].flat();\n    return specs.filter((spec) => {\n      const { test, include, exclude } = spec;\n      const config = { test, include, exclude };\n      return chunkIds.some((id) =>\n        webpack.ModuleFilenameHelpers.matchObject(config, id.toString())\n      );\n    });\n  }\n\n  getRelatedSourceMap(chunk: webpack.StatsChunk) {\n    return chunk.auxiliaryFiles?.find((file) => /\\.map$/.test(file));\n  }\n\n  ensureAbsolutePath(filePath: string) {\n    if (path.isAbsolute(filePath)) return filePath;\n    return path.join(this.config.context, filePath);\n  }\n\n  classifyChunks({\n    chunks,\n    entryOptions,\n  }: {\n    chunks: webpack.StatsChunk[];\n    entryOptions: webpack.EntryNormalized;\n  }) {\n    const localChunks = new Set<webpack.StatsChunk>();\n    const remoteChunks = new Set<webpack.StatsChunk>();\n\n    const chunksById = new Map(chunks.map((chunk) => [chunk.id!, chunk]));\n\n    // Add explicitly known initial chunks as local chunks\n    chunks\n      .filter((chunk) => chunk.initial && chunk.entry)\n      .filter((chunk) => chunk.id! in entryOptions)\n      .forEach((chunk) => localChunks.add(chunk));\n\n    // Add siblings of known initial chunks as local chunks\n    chunks\n      .filter((chunk) => localChunks.has(chunk))\n      .flatMap((chunk) => chunk.siblings!)\n      .map((chunkId) => chunksById.get(chunkId))\n      .forEach((chunk) => localChunks.add(chunk!));\n\n    // Add chunks matching local specs as local chunks\n    chunks\n      .filter((chunk) => this.matchChunkToSpecs(chunk, this.localSpecs).length)\n      .forEach((chunk) => localChunks.add(chunk));\n\n    // Add parents of local chunks as local chunks\n    const addParentsOfLocalChunks = () => {\n      chunks\n        .filter((chunk) => localChunks.has(chunk))\n        .flatMap((chunk) => chunk.parents!)\n        .map((chunkId) => chunksById.get(chunkId))\n        .forEach((chunk) => localChunks.add(chunk!));\n      return localChunks.size;\n    };\n\n    // Iterate until no new chunks are added\n    while (localChunks.size - addParentsOfLocalChunks());\n\n    // Add all other chunks as remote chunks\n    chunks\n      .filter((chunk) => !localChunks.has(chunk))\n      .forEach((chunk) => remoteChunks.add(chunk));\n\n    return { localChunks, remoteChunks };\n  }\n\n  /**\n   * Apply the plugin.\n   *\n   * @param compiler Webpack compiler instance.\n   */\n  apply(compiler: webpack.Compiler) {\n    if (!this.config.enabled) return;\n\n    assert(compiler.options.output.path, \"Can't infer output path from config\");\n\n    const logger = compiler.getInfrastructureLogger('RepackOutputPlugin');\n    const outputPath = compiler.options.output.path as string;\n\n    const auxiliaryAssets = new Set<string>();\n\n    compiler.hooks.done.tapPromise('RepackOutputPlugin', async (stats) => {\n      const compilationStats = stats.toJson({\n        all: false,\n        assets: true,\n        chunks: true,\n        chunkRelations: true,\n        ids: true,\n      });\n\n      const assets = compilationStats.assets!;\n\n      const { localChunks, remoteChunks } = this.classifyChunks({\n        chunks: compilationStats.chunks!,\n        entryOptions: compiler.options.entry,\n      });\n\n      // Collect auxiliary assets (only remote-assets for now)\n      assets\n        .filter((asset) => /^remote-assets/.test(asset.name))\n        .forEach((asset) => auxiliaryAssets.add(asset.name));\n\n      let localAssetsCopyProcessor;\n      let { bundleFilename, sourceMapFilename, assetsPath } =\n        this.config.output;\n\n      if (bundleFilename) {\n        bundleFilename = this.ensureAbsolutePath(bundleFilename);\n\n        const bundlePath = path.dirname(bundleFilename);\n\n        sourceMapFilename = this.ensureAbsolutePath(\n          sourceMapFilename || `${bundleFilename}.map`\n        );\n\n        assetsPath = assetsPath || bundlePath;\n\n        logger.debug('Detected output paths:', {\n          bundleFilename,\n          bundlePath,\n          sourceMapFilename,\n          assetsPath,\n        });\n\n        localAssetsCopyProcessor = new AssetsCopyProcessor({\n          platform: this.config.platform,\n          outputPath,\n          bundleOutput: bundleFilename,\n          bundleOutputDir: bundlePath,\n          sourcemapOutput: sourceMapFilename,\n          assetsDest: assetsPath,\n          logger,\n        });\n      }\n\n      const remoteAssetsCopyProcessors: Record<string, AssetsCopyProcessor> =\n        {};\n\n      for (const chunk of localChunks) {\n        // Process entry chunk - only one entry chunk is allowed here\n        localAssetsCopyProcessor?.enqueueChunk(chunk, {\n          isEntry: chunk.id! === this.config.entryName,\n          sourceMapFile: this.getRelatedSourceMap(chunk),\n        });\n      }\n\n      for (const chunk of remoteChunks) {\n        const specs = this.matchChunkToSpecs(chunk, this.remoteSpecs);\n\n        if (specs.length === 0) {\n          throw new Error(`No spec found for chunk ${chunk.id}`);\n        }\n        if (specs.length > 1) {\n          logger.warn(`Multiple specs found for chunk ${chunk.id}`);\n        }\n\n        const spec = specs[0] as { outputPath: string };\n        const specOutputPath = this.ensureAbsolutePath(spec.outputPath);\n\n        if (!remoteAssetsCopyProcessors[specOutputPath]) {\n          remoteAssetsCopyProcessors[specOutputPath] = new AssetsCopyProcessor({\n            platform: this.config.platform,\n            outputPath,\n            bundleOutput: '',\n            bundleOutputDir: specOutputPath,\n            sourcemapOutput: '',\n            assetsDest: specOutputPath,\n            logger,\n          });\n        }\n\n        remoteAssetsCopyProcessors[specOutputPath].enqueueChunk(chunk, {\n          isEntry: false,\n          sourceMapFile: this.getRelatedSourceMap(chunk),\n        });\n      }\n\n      let auxiliaryAssetsCopyProcessor;\n      const auxiliaryAssetsPath = this.config.output.auxiliaryAssetsPath;\n      if (auxiliaryAssetsPath) {\n        auxiliaryAssetsCopyProcessor = new AuxiliaryAssetsCopyProcessor({\n          platform: this.config.platform,\n          outputPath,\n          assetsDest: this.ensureAbsolutePath(auxiliaryAssetsPath),\n          logger,\n        });\n\n        for (const asset of auxiliaryAssets) {\n          auxiliaryAssetsCopyProcessor.enqueueAsset(asset);\n        }\n      }\n\n      await Promise.all([\n        ...(localAssetsCopyProcessor?.execute() ?? []),\n        ...Object.values(remoteAssetsCopyProcessors).reduce(\n          (acc, processor) => acc.concat(...processor.execute()),\n          [] as Promise<void>[]\n        ),\n        ...(auxiliaryAssetsCopyProcessor?.execute() ?? []),\n      ]);\n    });\n  }\n}\n"],"mappings":"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","ignoreList":[]}